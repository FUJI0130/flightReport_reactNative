# 開発ログ

## マイルストーン 1: 飛行日誌のモデル作成

### ステップ 1: ドメイン層のモデルにフィールドを追加

- モデル `FlightLog` に以下のフィールドを追加しました。
  - `date`: 日付
  - `pilotName`: パイロット名
  - `registrationNumber`: 登録番号
  - `flightPurposeAndRoute`: 飛行の目的とルート
  - `takeoffLocationAndTime`: 離陸場所と時間
  - `landingLocationAndTime`: 着陸場所と時間
  - `flightDuration`: 飛行時間
  - `issues`: 問題点

### ステップ 2: フライトログを保存するリポジトリの分離

- JSONとCSVそれぞれのリポジトリを作成しました。
- `FlightLogRepositoryFactory` を使って設定に応じて適切なリポジトリを選択するようにしました。

### ステップ 3: CSVファイルのフォーマット検証機能の追加

- `validateCSVFormat` 関数を追加し、CSVファイルのヘッダーを検証するようにしました。
- ヘッダーが正しくない場合、エラーメッセージを表示するようにしました。

### ステップ 4: 新しい飛行日誌の作成と読み込み

- 新しい飛行日誌を作成するための画面 `NewFlightLogScreen` を修正しました。
- 作成後、フライトレコード画面に遷移するようにしました。

## マイルストーン 2: ファイル選択ダイアログの実装

### ステップ 1: `FileSelectionDialog` コンポーネントの作成

- フライトレコード画面に表示するファイル選択ダイアログを作成しました。
- 有効なファイルのみを表示するようにしました。

### ステップ 2: ダイアログからファイルを選択して読み込む機能の追加

- ファイル選択ダイアログで選択したファイルを読み込み、フライトレコードとして表示するようにしました。

### ステップ 3: ファイル選択ダイアログのスタイル調整

- デバイスに依存しないようにダイアログのサイズを調整しました。

## マイルストーン 3: エラーハンドリングと画面遷移の改善

### ステップ 1: CSVファイルの形式エラーハンドリング

- CSVファイルの形式が正しくない場合にエラーメッセージを表示し、ファイル選択ダイアログを再度表示するようにしました。

### ステップ 2: 画面遷移の改善

- 新しい飛行日誌を作成した後、フライトレコード画面に遷移するようにしました。
- フライトレコード画面から戻るボタンを押した際に、ホーム画面に戻るようにしました。

## 結論

これまでの変更により、飛行日誌の作成、保存、読み込みの一連の流れが改善されました。また、CSVファイルの形式検証やエラーハンドリングも適切に行われるようになりました。引き続き機能の追加や改善を進めていきます。
